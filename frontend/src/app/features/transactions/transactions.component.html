    <div class="page-container">
      <header class="header">
        <h1>Transactions</h1>
        <button tuiButton (click)="openDialog()">Add Transaction</button>
      </header>

      <div class="filters card">
        <div class="filter-row">
          <div class="filter-item">
            <label>From</label>
            <input type="date" [formControl]="filterFrom" class="form-input">
          </div>
          <div class="filter-item">
            <label>To</label>
            <input type="date" [formControl]="filterTo" class="form-input">
          </div>
          <button tuiButton appearance="flat" (click)="loadTransactions()">Apply</button>
        </div>
      </div>

      @if (loading()) {
        <div class="loading">Loading...</div>
      } @else if (transactions().length > 0) {
        <div class="transactions-list">
          @for (tx of transactions(); track tx.id) {
            <div class="transaction-item card">
              <div class="tx-category" [style.border-color]="tx.category_color">
                <span class="category-name">{{ tx.category_name }}</span>
              </div>
              <div class="tx-details">
                <span class="tx-amount" [class.expense]="tx.amount < 0" [class.income]="tx.amount > 0">
                  {{ tx.amount | currency }}
                </span>
                <span class="tx-date">{{ tx.date | date:'mediumDate' }}</span>
                @if (tx.description) {
                  <span class="tx-description">{{ tx.description }}</span>
                }
              </div>
              <div class="tx-actions">
                <button tuiButton appearance="flat" size="s" (click)="openDialog(tx)">Edit</button>
                <button tuiButton appearance="flat" size="s" (click)="deleteTransaction(tx.id)">Delete</button>
              </div>
            </div>
          }
        </div>
      } @else {
        <p class="empty-state">No transactions found</p>
      }

      @if (showDialog()) {
        <div class="dialog-overlay" (click)="closeDialog()">
          <div class="dialog card" (click)="$event.stopPropagation()">
            <h2>{{ editingTransaction() ? 'Edit' : 'Add' }} Transaction</h2>
            <form [formGroup]="form" (ngSubmit)="onSubmit()">
              <div class="form-group">
                <label>Amount</label>
                <input type="number" formControlName="amount" class="form-input" step="0.01">
              </div>
              <div class="form-group">
                <label>Category</label>
                <select formControlName="categoryId" class="form-input">
                  <option [value]="null">Select category</option>
                  @for (cat of leafCategories(); track cat.id) {
                    <option [value]="cat.id">{{ cat.name }}</option>
                  }
                </select>
              </div>
              <div class="form-group">
                <label>Date</label>
                <input type="date" formControlName="date" class="form-input">
              </div>
              <div class="form-group">
                <label>Description</label>
                <input type="text" formControlName="description" class="form-input" placeholder="Description (optional)">
              </div>
              <div class="dialog-actions">
                <button tuiButton appearance="flat" type="button" (click)="closeDialog()">Cancel</button>
                <button tuiButton type="submit" [disabled]="form.invalid">{{ editingTransaction() ? 'Update' : 'Create' }}</button>
              </div>
            </form>
          </div>
        </div>
      }
    </div>
